<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>何角形かが分かるシンプルな図形</title>
    <!-- Tailwind CSSを読み込む -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* カスタムスタイル: インターフェイス全体にInterフォントを適用 */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }
        /* Canvasの基本スタイル */
        #polygonCanvas {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
            border: 2px solid #3b82f6;
            transition: border-color 0.3s;
        }
    </style>
</head>
<body class="p-4 sm:p-8 flex flex-col items-center min-h-screen">

    <div class="max-w-md w-full bg-white p-6 sm:p-8 rounded-xl shadow-2xl space-y-6">
        <h1 class="text-3xl font-extrabold text-center text-blue-600">
            多角形ジェネレーター
        </h1>
        <p class="text-sm text-gray-600 text-center">
            頂点の数 (V) と辺の数 (E) を入力してください。V = E のとき、**隣り合う頂点のみを結び**、多角形の外枠を描画します。
        </p>

        <!-- 入力フォーム -->
        <div class="space-y-4">
            <!-- 頂点の数の入力 -->
            <label class="block">
                <span class="text-gray-700 font-semibold">頂点の数 (V):</span>
                <input type="number" id="verticesInput" value="5" min="3"
                       class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-3 text-lg"
                       oninput="updatePolygon()">
            </label>

            <!-- 辺の数の入力 -->
            <label class="block">
                <span class="text-gray-700 font-semibold">辺の数 (E):</span>
                <input type="number" id="edgesInput" value="5" min="3"
                       class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-3 text-lg"
                       oninput="updatePolygon()">
            </label>

            <!-- 描画ボタン -->
            <button onclick="updatePolygon()"
                    class="w-full py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition duration-200 shadow-lg active:scale-95">
                図形を描画
            </button>
        </div>

        <!-- メッセージ/エラー表示エリア -->
        <div id="messageArea" class="p-3 rounded-lg text-center font-medium" role="alert">
            <!-- メッセージはJSによって挿入されます -->
        </div>
    </div>

    <!-- 描画エリア -->
    <div class="mt-6 w-full max-w-md">
        <canvas id="polygonCanvas" width="400" height="400" class="w-full bg-white rounded-xl"></canvas>
    </div>

    <script>
        // Canvas要素と描画コンテキストを取得
        const canvas = document.getElementById('polygonCanvas');
        const ctx = canvas.getContext('2d');
        const messageArea = document.getElementById('messageArea');

        /**
         * メッセージエリアを更新し、スタイルを適用する関数
         * @param {string} message - 表示するメッセージ
         * @param {string} type - 'success', 'error', 'info' のいずれか
         */
        function displayMessage(message, type) {
            messageArea.textContent = message;
            messageArea.className = 'p-3 rounded-lg text-center font-medium'; // 基本クラスをリセット

            if (type === 'error') {
                messageArea.classList.add('bg-red-100', 'text-red-700');
            } else if (type === 'success') {
                messageArea.classList.add('bg-green-100', 'text-green-700');
            } else {
                messageArea.classList.add('bg-blue-100', 'text-blue-700');
            }
        }

        /**
         * 隣り合う頂点のみを線で結んだ正多角形を描画する関数
         * @param {number} n - 頂点の数 (n角形)
         */
        function drawPolygon(n) {
            // Canvasをクリア
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const size = Math.min(canvas.width, canvas.height);
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            // 半径はCanvasサイズの約40%に設定
            const radius = size * 0.4;
            // 頂点間の角度（ラジアン）
            const angleStep = (2 * Math.PI) / n;

            // 頂点座標を格納する配列
            const points = [];
            // 描画を上向きにするため、開始角度を調整 ( - Math.PI / 2 )
            const startAngle = -Math.PI / 2;

            // 1. 頂点座標の計算と格納
            for (let i = 0; i < n; i++) {
                const angle = startAngle + i * angleStep;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                points.push({ x, y });
            }

            // 2. 辺の描画 (隣り合う頂点のみを結ぶ)
            ctx.beginPath();
            ctx.strokeStyle = '#1d4ed8'; // 濃い青 (辺の色)
            ctx.lineWidth = 4;
            ctx.fillStyle = 'rgba(59, 130, 246, 0.2)'; // 薄い青 (塗りつぶしの色)
            
            // 最初の頂点に移動
            ctx.moveTo(points[0].x, points[0].y);

            // 全ての隣接する頂点を結ぶ (辺)
            for (let i = 1; i < n; i++) {
                ctx.lineTo(points[i].x, points[i].y);
            }

            // 最後の頂点から最初の頂点まで戻って図形を閉じる
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // 3. 頂点に小さな円を描画 (最前面に来るように)
            for (const point of points) {
                ctx.fillStyle = '#1e40af';
                ctx.beginPath();
                ctx.arc(point.x, point.y, 6, 0, 2 * Math.PI); // 少し大きくして目立たせる
                ctx.fill();
            }

            // 4. 図形の名前を表示
            let name = n === 3 ? "正三角形" : n === 4 ? "正方形" : n === 5 ? "正五角形" : n === 6 ? "正六角形" : `正${n}角形`;
            
            // 図形の中央にテキストを描画
            ctx.fillStyle = '#0f3a67';
            ctx.font = 'bold 24px Inter, sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(name, centerX, centerY + 10);
        }

        /**
         * 頂点と辺の入力値に基づいて描画を更新するメイン関数
         */
        function updatePolygon() {
            const V = parseInt(document.getElementById('verticesInput').value);
            const E = parseInt(document.getElementById('edgesInput').value);

            // 1. 入力値のバリデーション
            if (isNaN(V) || isNaN(E)) {
                displayMessage("頂点と辺の数に有効な数値を入力してください。", 'error');
                return;
            }

            // 2. 多角形の最小要件チェック
            if (V < 3 || E < 3) {
                displayMessage("多角形を構成するには、頂点と辺の数は3以上である必要があります。", 'error');
                return;
            }

            // 3. 多角形の基本的な定義チェック (V = E)
            if (V !== E) {
                displayMessage(`平面多角形は V (頂点) = E (辺) です。現在の入力 V=${V}, E=${E} では描画できません。`, 'error');
                return;
            }

            // 4. 正常な描画
            drawPolygon(V);
            
            let polygonName = V === 3 ? "三角形" : V === 4 ? "四角形" : V === 5 ? "五角形" : V === 6 ? "六角形" : `${V}角形`;
            displayMessage(`頂点 ${V}、辺 ${E} の正${polygonName}を描画しました。`, 'success');
        }

        // ページロード時に一度描画を実行
        window.onload = function() {
            updatePolygon();
            // ウィンドウサイズ変更時にCanvasをレスポンシブに調整
            window.addEventListener('resize', () => {
                // Canvasサイズを調整
                canvas.width = 400; // 固定サイズ維持
                canvas.height = 400; // 固定サイズ維持
                updatePolygon();
            });
        };
    </script>
</body>
</html>


